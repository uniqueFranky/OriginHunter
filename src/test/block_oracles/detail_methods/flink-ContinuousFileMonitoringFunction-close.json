{
  "origin": "codeshovel",
  "repositoryName": "flink",
  "repositoryPath": "/Users/franky/Documents/Homework/毕业设计/testcase/flink/.git",
  "startCommitName": "9e936a5f8198b0059e9b5fba33163c2bbe3efbdd",
  "sourceFileName": "ContinuousFileMonitoringFunction.java",
  "functionName": "close",
  "functionId": "close",
  "sourceFilePath": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java",
  "functionAnnotation": "@Override",
  "functionDoc": "",
  "functionStartLine": 341,
  "functionEndLine": 354,
  "numCommitsSeen": 20,
  "timeTaken": 1353,
  "changeHistory": [
    "819fe2083d930b25a21dbaf1897ba9f43616fe9d",
    "b410c393c960f55c09fadd4f22732d06f801b938",
    "bd273a8f435b222eb67840fb39b854ec9ef8602f",
    "d353895ba512a5e30fb08a25643fd93f085e8456"
  ],
  "changeHistoryShort": {
    "819fe2083d930b25a21dbaf1897ba9f43616fe9d": "Ybodychange",
    "b410c393c960f55c09fadd4f22732d06f801b938": "Ybodychange",
    "bd273a8f435b222eb67840fb39b854ec9ef8602f": "Ybodychange",
    "d353895ba512a5e30fb08a25643fd93f085e8456": "Yintroduced"
  },
  "changeHistoryDetails": {
    "819fe2083d930b25a21dbaf1897ba9f43616fe9d": {
      "type": "Ybodychange",
      "commitMessage": "[FLINK-7674] Fix NullPointerException in ContinuousFileMonitoringFunction#close\n\nThis closes #4711.\n",
      "commitDate": "2017/9/28 下午8:56",
      "commitName": "819fe2083d930b25a21dbaf1897ba9f43616fe9d",
      "commitAuthor": "Bowen Li",
      "commitDateOld": "2017/8/25 上午2:17",
      "commitNameOld": "6642768ad8f8c5d1856742a6d148f7724c20666c",
      "commitAuthorOld": "Stefan Richter",
      "daysBetweenCommits": 34.78,
      "commitsBetweenForRepo": 165,
      "commitsBetweenForFile": 1,
      "actualSource": "@Override\npublic void close() throws Exception {\n    super.close();\n    if (checkpointLock !\u003d null) {\n        synchronized (checkpointLock) {\n            globalModificationTime \u003d Long.MAX_VALUE;\n            isRunning \u003d false;\n        }\n    }\n    if (LOG.isDebugEnabled()) {\n        LOG.debug(\"Closed File Monitoring Source for path: \" + path + \".\");\n    }\n}",
      "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java",
      "functionStartLine": 337,
      "functionName": "close",
      "functionAnnotation": "@Override",
      "functionDoc": "",
      "diff": "@@ -1,11 +1,13 @@\n @Override\n public void close() throws Exception {\n     super.close();\n-    synchronized (checkpointLock) {\n-        globalModificationTime \u003d Long.MAX_VALUE;\n-        isRunning \u003d false;\n+    if (checkpointLock !\u003d null) {\n+        synchronized (checkpointLock) {\n+            globalModificationTime \u003d Long.MAX_VALUE;\n+            isRunning \u003d false;\n+        }\n     }\n     if (LOG.isDebugEnabled()) {\n         LOG.debug(\"Closed File Monitoring Source for path: \" + path + \".\");\n     }\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "b410c393c960f55c09fadd4f22732d06f801b938": {
      "type": "Ybodychange",
      "commitMessage": "[FLINK-4800] Introduce the TimestampedFileInputSplit for Continuous File Processing\n\nThis commit mainly introduces the TimestampedFileInputSplit,\nwhich extends the class FileInputSplit and also contains:\ni) the modification time of the file it belongs to and also, and\nii) when checkpointing, the point the reader is currently reading\n    from in the split the reader.\n\nThis will be useful for rescaling. With this addition, the\nContinuousFileMonitoringFunction sends TimestampedFileInputSplit\nto the Readers, and the Readers\u0027 state now contain only\nTimestampedFileInputSplit.\n\nIn addition, it refactors the code of the ContinuousFileMonitoringFunction\nand that of the ContinuousFileReaderOperator along with the related\ntests.\n\nThis closes #2618.\n",
      "commitDate": "2016/10/27 下午8:22",
      "commitName": "b410c393c960f55c09fadd4f22732d06f801b938",
      "commitAuthor": "kl0u",
      "commitDateOld": "2016/10/10 下午4:49",
      "commitNameOld": "b949d42d9f16fe52126f03a960fdf23ad71e6e63",
      "commitAuthorOld": "Maximilian Michels",
      "daysBetweenCommits": 17.15,
      "commitsBetweenForRepo": 108,
      "commitsBetweenForFile": 1,
      "actualSource": "@Override\npublic void close() throws Exception {\n    super.close();\n    synchronized (checkpointLock) {\n        globalModificationTime \u003d Long.MAX_VALUE;\n        isRunning \u003d false;\n    }\n    if (LOG.isDebugEnabled()) {\n        LOG.debug(\"Closed File Monitoring Source for path: \" + path + \".\");\n    }\n}",
      "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java",
      "functionStartLine": 257,
      "functionName": "close",
      "functionAnnotation": "@Override",
      "functionDoc": "",
      "diff": "@@ -1,9 +1,11 @@\n @Override\n public void close() throws Exception {\n     super.close();\n     synchronized (checkpointLock) {\n         globalModificationTime \u003d Long.MAX_VALUE;\n         isRunning \u003d false;\n     }\n-    LOG.info(\"Closed File Monitoring Source.\");\n+    if (LOG.isDebugEnabled()) {\n+        LOG.debug(\"Closed File Monitoring Source for path: \" + path + \".\");\n+    }\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "bd273a8f435b222eb67840fb39b854ec9ef8602f": {
      "type": "Ybodychange",
      "commitMessage": "[FLINK-4075] Fix unstable ContinuousFileProcessingCheckpointITCase\n",
      "commitDate": "2016/6/30 下午8:46",
      "commitName": "bd273a8f435b222eb67840fb39b854ec9ef8602f",
      "commitAuthor": "kl0u",
      "commitDateOld": "2016/6/15 上午12:11",
      "commitNameOld": "d353895ba512a5e30fb08a25643fd93f085e8456",
      "commitAuthorOld": "kl0u",
      "daysBetweenCommits": 15.86,
      "commitsBetweenForRepo": 93,
      "commitsBetweenForFile": 1,
      "actualSource": "@Override\npublic void close() throws Exception {\n    super.close();\n    synchronized (checkpointLock) {\n        globalModificationTime \u003d Long.MAX_VALUE;\n        isRunning \u003d false;\n    }\n    LOG.info(\"Closed File Monitoring Source.\");\n}",
      "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java",
      "functionStartLine": 285,
      "functionName": "close",
      "functionAnnotation": "@Override",
      "functionDoc": "",
      "diff": "@@ -1,6 +1,9 @@\n @Override\n public void close() throws Exception {\n     super.close();\n-    isRunning \u003d false;\n+    synchronized (checkpointLock) {\n+        globalModificationTime \u003d Long.MAX_VALUE;\n+        isRunning \u003d false;\n+    }\n     LOG.info(\"Closed File Monitoring Source.\");\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "d353895ba512a5e30fb08a25643fd93f085e8456": {
      "type": "Yintroduced",
      "commitMessage": "[FLINK-2314] Make Streaming File Sources Persistent\n\nThis commit is a combination of several commits/changes. It combines\nchanges to the file input formats and the streaming file read operator\nand integrates them into the API.\n\nThese are the messages of the other two commits:\n\n[FLINK-3717] Make FileInputFormat checkpointable\n\nThis adds a new interface called CheckpointableInputFormat\nwhich describes input formats whose state is queryable,\ni.e. getCurrentState() returns where the reader is\nin the underlying source, and they can resume reading from\na user-specified position.\n\nThis functionality is not yet leveraged by current readers.\n\n[FLINK-3889] Refactor File Monitoring Source\n\nThis is meant to replace the different file\nreading sources in Flink streaming. Now there is\none monitoring source with DOP 1 monitoring a\ndirectory and assigning input split to downstream\nreaders.\n\nIn addition, it makes the new features added by\nFLINK-3717 work together with the aforementioned entities\n(the monitor and the readers) in order to have\nfault tolerant file sources and exactly once guarantees.\n\nThis does not replace the old API calls. This\nwill be done in a future commit.\n",
      "commitDate": "2016/6/15 上午12:11",
      "commitName": "d353895ba512a5e30fb08a25643fd93f085e8456",
      "commitAuthor": "kl0u",
      "diff": "@@ -0,0 +1,6 @@\n+@Override\n+public void close() throws Exception {\n+    super.close();\n+    isRunning \u003d false;\n+    LOG.info(\"Closed File Monitoring Source.\");\n+}\n\\ No newline at end of file\n",
      "actualSource": "@Override\npublic void close() throws Exception {\n    super.close();\n    isRunning \u003d false;\n    LOG.info(\"Closed File Monitoring Source.\");\n}",
      "path": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java",
      "functionStartLine": 295,
      "functionName": "close",
      "functionAnnotation": "@Override",
      "functionDoc": ""
    }
  }
}