{
  "origin": "codeshovel",
  "repositoryName": "httpie",
  "repositoryPath": "/Users/franky/Documents/Homework/毕业设计/testcase/httpie/.git",
  "startCommitName": "bece3c77bb51ecc55dcc4008375dc29ccd91575c",
  "sourceFileName": "downloads.py",
  "functionName": "sum_up",
  "functionId": "ProgressReporterThread__sum_up___self",
  "sourceFilePath": "httpie/downloads.py",
  "functionAnnotation": "",
  "functionStartLine": 472,
  "functionEndLine": 494,
  "numCommitsSeen": 51,
  "timeTaken": 581,
  "changeHistory": [
    "b01906a45c7b745a487af535310373a890b2758a",
    "1fc8396c4ba6b6e6fda19fb1d3a7d8fa40296cd5",
    "5a1177d57e58072d929a674a28e80661b81a393a",
    "40bd8f65af247896f26456a8fc099633d23f5cf6",
    "ebfce6fb93b077a039a5aef7f5deb0e5f23b5c28"
  ],
  "changeHistoryShort": {
    "b01906a45c7b745a487af535310373a890b2758a": "Ybodychange",
    "1fc8396c4ba6b6e6fda19fb1d3a7d8fa40296cd5": "Ybodychange",
    "5a1177d57e58072d929a674a28e80661b81a393a": "Ybodychange",
    "40bd8f65af247896f26456a8fc099633d23f5cf6": "Ybodychange",
    "ebfce6fb93b077a039a5aef7f5deb0e5f23b5c28": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b01906a45c7b745a487af535310373a890b2758a": {
      "type": "Ybodychange",
      "commitMessage": "Fixed ZeroDivisionError in download summary.\n\nCloses #202\n",
      "commitDate": "2014/2/18 下午8:06",
      "commitName": "b01906a45c7b745a487af535310373a890b2758a",
      "commitAuthor": "Jakub Roztocil",
      "commitDateOld": "2013/9/25 上午1:50",
      "commitNameOld": "29f6b6a2a97f6e99d169d9c2aa3a429557354c7a",
      "commitAuthorOld": "Jakub Roztocil",
      "daysBetweenCommits": 146.76,
      "commitsBetweenForRepo": 35,
      "commitsBetweenForFile": 1,
      "actualSource": "    def sum_up(self):\n        actually_downloaded \u003d (self.status.downloaded\n                               - self.status.resumed_from)\n        time_taken \u003d self.status.time_finished - self.status.time_started\n\n        self.output.write(CLEAR_LINE)\n\n        try:\n            speed \u003d actually_downloaded / time_taken\n        except ZeroDivisionError:\n            # Either time is 0 (not all systems provide `time.time`\n            # with a better precision than 1 second), and/or nothing\n            # has been downloaded.\n            speed \u003d actually_downloaded\n\n        self.output.write(SUMMARY.format(\n            downloaded\u003dhumanize_bytes(actually_downloaded),\n            total\u003d(self.status.total_size\n                   and humanize_bytes(self.status.total_size)),\n            speed\u003dhumanize_bytes(speed),\n            time\u003dtime_taken,\n        ))\n        self.output.flush()",
      "path": "httpie/downloads.py",
      "functionStartLine": 414,
      "functionName": "sum_up",
      "functionAnnotation": "",
      "diff": "@@ -1,14 +1,23 @@\n     def sum_up(self):\n         actually_downloaded \u003d (self.status.downloaded\n                                - self.status.resumed_from)\n         time_taken \u003d self.status.time_finished - self.status.time_started\n \n         self.output.write(CLEAR_LINE)\n+\n+        try:\n+            speed \u003d actually_downloaded / time_taken\n+        except ZeroDivisionError:\n+            # Either time is 0 (not all systems provide `time.time`\n+            # with a better precision than 1 second), and/or nothing\n+            # has been downloaded.\n+            speed \u003d actually_downloaded\n+\n         self.output.write(SUMMARY.format(\n             downloaded\u003dhumanize_bytes(actually_downloaded),\n             total\u003d(self.status.total_size\n                    and humanize_bytes(self.status.total_size)),\n-            speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n+            speed\u003dhumanize_bytes(speed),\n             time\u003dtime_taken,\n         ))\n         self.output.flush()\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "1fc8396c4ba6b6e6fda19fb1d3a7d8fa40296cd5": {
      "type": "Ybodychange",
      "commitMessage": "Stop the progres reporter thread on error.\n",
      "commitDate": "2013/4/16 下午3:55",
      "commitName": "1fc8396c4ba6b6e6fda19fb1d3a7d8fa40296cd5",
      "commitAuthor": "Jakub Roztocil",
      "commitDateOld": "2013/4/15 上午11:56",
      "commitNameOld": "6c3b983c1861cc6079ef3e1a98028adf08ab1810",
      "commitAuthorOld": "Jakub Roztocil",
      "daysBetweenCommits": 1.17,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "actualSource": "    def sum_up(self):\n        actually_downloaded \u003d (self.status.downloaded\n                               - self.status.resumed_from)\n        time_taken \u003d self.status.time_finished - self.status.time_started\n\n        self.output.write(CLEAR_LINE)\n        self.output.write(SUMMARY.format(\n            downloaded\u003dhumanize_bytes(actually_downloaded),\n            total\u003d(self.status.total_size\n                   and humanize_bytes(self.status.total_size)),\n            speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n            time\u003dtime_taken,\n        ))\n        self.output.flush()",
      "path": "httpie/downloads.py",
      "functionStartLine": 410,
      "functionName": "sum_up",
      "functionAnnotation": "",
      "diff": "@@ -1,14 +1,14 @@\n     def sum_up(self):\n-        actually_downloaded \u003d (self.progress.downloaded\n-                               - self.progress.resumed_from)\n-        time_taken \u003d self.progress.time_finished - self.progress.time_started\n+        actually_downloaded \u003d (self.status.downloaded\n+                               - self.status.resumed_from)\n+        time_taken \u003d self.status.time_finished - self.status.time_started\n \n         self.output.write(CLEAR_LINE)\n         self.output.write(SUMMARY.format(\n             downloaded\u003dhumanize_bytes(actually_downloaded),\n-            total\u003d(self.progress.total_size\n-                   and humanize_bytes(self.progress.total_size)),\n+            total\u003d(self.status.total_size\n+                   and humanize_bytes(self.status.total_size)),\n             speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n             time\u003dtime_taken,\n         ))\n         self.output.flush()\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "5a1177d57e58072d929a674a28e80661b81a393a": {
      "type": "Ybodychange",
      "commitMessage": "Fixed downloads with no Content-Length.\n",
      "commitDate": "2013/4/14 上午1:50",
      "commitName": "5a1177d57e58072d929a674a28e80661b81a393a",
      "commitAuthor": "Jakub Roztocil",
      "commitDateOld": "2013/4/13 上午9:02",
      "commitNameOld": "c63a92f9b7fe6159ab83d49921131d725b3c5cfd",
      "commitAuthorOld": "Jakub Roztocil",
      "daysBetweenCommits": 0.7,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "actualSource": "    def sum_up(self):\n        actually_downloaded \u003d (\n            self.progress.downloaded - self.progress.resumed_from)\n        time_taken \u003d self.progress.time_finished - self.progress.time_started\n\n        self.output.write(CLEAR_LINE)\n        self.output.write(SUMMARY.format(\n            downloaded\u003dhumanize_bytes(actually_downloaded),\n            total\u003d(self.progress.total_size\n                   and humanize_bytes(self.progress.total_size)),\n            speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n            time\u003dtime_taken,\n        ))\n        self.output.flush()",
      "path": "httpie/downloads.py",
      "functionStartLine": 393,
      "functionName": "sum_up",
      "functionAnnotation": "",
      "diff": "@@ -1,13 +1,14 @@\n     def sum_up(self):\n         actually_downloaded \u003d (\n             self.progress.downloaded - self.progress.resumed_from)\n         time_taken \u003d self.progress.time_finished - self.progress.time_started\n \n         self.output.write(CLEAR_LINE)\n         self.output.write(SUMMARY.format(\n             downloaded\u003dhumanize_bytes(actually_downloaded),\n-            total\u003dhumanize_bytes(self.progress.total_size),\n+            total\u003d(self.progress.total_size\n+                   and humanize_bytes(self.progress.total_size)),\n             speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n             time\u003dtime_taken,\n         ))\n         self.output.flush()\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "40bd8f65af247896f26456a8fc099633d23f5cf6": {
      "type": "Ybodychange",
      "commitMessage": "Handle KeyboardInterrupt while --download\u0027ing (#104).\n",
      "commitDate": "2013/4/12 下午8:08",
      "commitName": "40bd8f65af247896f26456a8fc099633d23f5cf6",
      "commitAuthor": "Jakub Roztocil",
      "commitDateOld": "2013/4/12 下午7:59",
      "commitNameOld": "347653b369298c66fc046597d20981380a2c9394",
      "commitAuthorOld": "Jakub Roztocil",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "actualSource": "    def sum_up(self):\n        actually_downloaded \u003d (\n            self.progress.downloaded - self.progress.resumed_from)\n        time_taken \u003d self.progress.time_finished - self.progress.time_started\n\n        self.output.write(CLEAR_LINE)\n        self.output.write(SUMMARY.format(\n            downloaded\u003dhumanize_bytes(actually_downloaded),\n            total\u003dhumanize_bytes(self.progress.total_size),\n            speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n            time\u003dtime_taken,\n        ))\n        self.output.flush()",
      "path": "httpie/downloads.py",
      "functionStartLine": 361,
      "functionName": "sum_up",
      "functionAnnotation": "",
      "diff": "@@ -1,13 +1,13 @@\n     def sum_up(self):\n         actually_downloaded \u003d (\n             self.progress.downloaded - self.progress.resumed_from)\n         time_taken \u003d self.progress.time_finished - self.progress.time_started\n \n         self.output.write(CLEAR_LINE)\n         self.output.write(SUMMARY.format(\n             downloaded\u003dhumanize_bytes(actually_downloaded),\n-            total\u003dhumanize_bytes(self.progress.downloaded),\n+            total\u003dhumanize_bytes(self.progress.total_size),\n             speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n             time\u003dtime_taken,\n         ))\n         self.output.flush()\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "ebfce6fb93b077a039a5aef7f5deb0e5f23b5c28": {
      "type": "Yintroduced",
      "commitMessage": "Improved progress bar (#104).\n",
      "commitDate": "2013/4/12 上午5:51",
      "commitName": "ebfce6fb93b077a039a5aef7f5deb0e5f23b5c28",
      "commitAuthor": "Jakub Roztocil",
      "diff": "@@ -0,0 +1,13 @@\n+    def sum_up(self):\n+        actually_downloaded \u003d (\n+            self.progress.downloaded - self.progress.resumed_from)\n+        time_taken \u003d self.progress.time_finished - self.progress.time_started\n+\n+        self.output.write(CLEAR_LINE)\n+        self.output.write(SUMMARY.format(\n+            downloaded\u003dhumanize_bytes(actually_downloaded),\n+            total\u003dhumanize_bytes(self.progress.downloaded),\n+            speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n+            time\u003dtime_taken,\n+        ))\n+        self.output.flush()\n\\ No newline at end of file\n",
      "actualSource": "    def sum_up(self):\n        actually_downloaded \u003d (\n            self.progress.downloaded - self.progress.resumed_from)\n        time_taken \u003d self.progress.time_finished - self.progress.time_started\n\n        self.output.write(CLEAR_LINE)\n        self.output.write(SUMMARY.format(\n            downloaded\u003dhumanize_bytes(actually_downloaded),\n            total\u003dhumanize_bytes(self.progress.downloaded),\n            speed\u003dhumanize_bytes(actually_downloaded / time_taken),\n            time\u003dtime_taken,\n        ))\n        self.output.flush()",
      "path": "httpie/downloads.py",
      "functionStartLine": 343,
      "functionName": "sum_up",
      "functionAnnotation": ""
    }
  }
}