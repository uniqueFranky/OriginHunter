{
  "origin": "codeshovel",
  "repositoryName": "asciinema",
  "repositoryPath": "/Users/franky/Documents/Homework/毕业设计/testcase/asciinema/.git",
  "startCommitName": "350d5e9d8b7cee1be5db4091815942c9d035e7dc",
  "sourceFileName": "upload.py",
  "functionName": "execute",
  "functionId": "UploadCommand__execute___self",
  "sourceFilePath": "asciinema/commands/upload.py",
  "functionAnnotation": "",
  "functionStartLine": 11,
  "functionEndLine": 29,
  "numCommitsSeen": 7,
  "timeTaken": 236,
  "changeHistory": [
    "0cec6ab2dd435f88b8b803ceb300d64de257942d",
    "ac1f970a0de3433022d6244d50e92839d8d1027e",
    "b7231c28722dfd776298b56b1b0ec68c0305192b",
    "4926788675caacd77fb2d7e9a8187721743553b7",
    "2fbd561e2c77a860a3b8022d300b3aa80921221d",
    "6d81785498b69f77e53c719bb90a049915f605f5"
  ],
  "changeHistoryShort": {
    "0cec6ab2dd435f88b8b803ceb300d64de257942d": "Ybodychange",
    "ac1f970a0de3433022d6244d50e92839d8d1027e": "Ybodychange",
    "b7231c28722dfd776298b56b1b0ec68c0305192b": "Ybodychange",
    "4926788675caacd77fb2d7e9a8187721743553b7": "Ybodychange",
    "2fbd561e2c77a860a3b8022d300b3aa80921221d": "Ybodychange",
    "6d81785498b69f77e53c719bb90a049915f605f5": "Yintroduced"
  },
  "changeHistoryDetails": {
    "0cec6ab2dd435f88b8b803ceb300d64de257942d": {
      "type": "Ybodychange",
      "commitMessage": "Prefer full message over just URL in upload response\n",
      "commitDate": "2019/1/13 上午1:38",
      "commitName": "0cec6ab2dd435f88b8b803ceb300d64de257942d",
      "commitAuthor": "Marcin Kulik",
      "commitDateOld": "2018/12/3 上午12:31",
      "commitNameOld": "ac1f970a0de3433022d6244d50e92839d8d1027e",
      "commitAuthorOld": "Marcin Kulik",
      "daysBetweenCommits": 41.05,
      "commitsBetweenForRepo": 7,
      "commitsBetweenForFile": 1,
      "actualSource": "    def execute(self):\n        try:\n            result, warn \u003d self.api.upload_asciicast(self.filename)\n\n            if warn:\n                self.print_warning(warn)\n\n            self.print(result.get(\u0027message\u0027) or result[\u0027url\u0027])\n\n        except OSError as e:\n            self.print_error(\"upload failed: %s\" % str(e))\n            return 1\n\n        except APIError as e:\n            self.print_error(\"upload failed: %s\" % str(e))\n            self.print_error(\"retry later by running: asciinema upload %s\" % self.filename)\n            return 1\n\n        return 0",
      "path": "asciinema/commands/upload.py",
      "functionStartLine": 12,
      "functionName": "execute",
      "functionAnnotation": "",
      "diff": "@@ -1,19 +1,19 @@\n     def execute(self):\n         try:\n             result, warn \u003d self.api.upload_asciicast(self.filename)\n \n             if warn:\n                 self.print_warning(warn)\n \n-            self.print(result[\u0027url\u0027])\n+            self.print(result.get(\u0027message\u0027) or result[\u0027url\u0027])\n \n         except OSError as e:\n             self.print_error(\"upload failed: %s\" % str(e))\n             return 1\n \n         except APIError as e:\n             self.print_error(\"upload failed: %s\" % str(e))\n             self.print_error(\"retry later by running: asciinema upload %s\" % self.filename)\n             return 1\n \n         return 0\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "ac1f970a0de3433022d6244d50e92839d8d1027e": {
      "type": "Ybodychange",
      "commitMessage": "Request JSON for upload response\n",
      "commitDate": "2018/12/3 上午12:31",
      "commitName": "ac1f970a0de3433022d6244d50e92839d8d1027e",
      "commitAuthor": "Marcin Kulik",
      "commitDateOld": "2017/12/3 上午5:30",
      "commitNameOld": "b7231c28722dfd776298b56b1b0ec68c0305192b",
      "commitAuthorOld": "Marcin Kulik",
      "daysBetweenCommits": 364.79,
      "commitsBetweenForRepo": 34,
      "commitsBetweenForFile": 1,
      "actualSource": "    def execute(self):\n        try:\n            result, warn \u003d self.api.upload_asciicast(self.filename)\n\n            if warn:\n                self.print_warning(warn)\n\n            self.print(result[\u0027url\u0027])\n\n        except OSError as e:\n            self.print_error(\"upload failed: %s\" % str(e))\n            return 1\n\n        except APIError as e:\n            self.print_error(\"upload failed: %s\" % str(e))\n            self.print_error(\"retry later by running: asciinema upload %s\" % self.filename)\n            return 1\n\n        return 0",
      "path": "asciinema/commands/upload.py",
      "functionStartLine": 12,
      "functionName": "execute",
      "functionAnnotation": "",
      "diff": "@@ -1,19 +1,19 @@\n     def execute(self):\n         try:\n-            url, warn \u003d self.api.upload_asciicast(self.filename)\n+            result, warn \u003d self.api.upload_asciicast(self.filename)\n \n             if warn:\n                 self.print_warning(warn)\n \n-            self.print(url)\n+            self.print(result[\u0027url\u0027])\n \n         except OSError as e:\n             self.print_error(\"upload failed: %s\" % str(e))\n             return 1\n \n         except APIError as e:\n             self.print_error(\"upload failed: %s\" % str(e))\n             self.print_error(\"retry later by running: asciinema upload %s\" % self.filename)\n             return 1\n \n         return 0\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "b7231c28722dfd776298b56b1b0ec68c0305192b": {
      "type": "Ybodychange",
      "commitMessage": "Handle whole group of OS errors instead of only FileNotFoundError when uploading\n",
      "commitDate": "2017/12/3 上午5:30",
      "commitName": "b7231c28722dfd776298b56b1b0ec68c0305192b",
      "commitAuthor": "Marcin Kulik",
      "commitDateOld": "2017/12/3 上午5:26",
      "commitNameOld": "4926788675caacd77fb2d7e9a8187721743553b7",
      "commitAuthorOld": "Marcin Kulik",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "actualSource": "    def execute(self):\n        try:\n            url, warn \u003d self.api.upload_asciicast(self.filename)\n\n            if warn:\n                self.print_warning(warn)\n\n            self.print(url)\n\n        except OSError as e:\n            self.print_error(\"upload failed: %s\" % str(e))\n            return 1\n\n        except APIError as e:\n            self.print_error(\"upload failed: %s\" % str(e))\n            self.print_error(\"retry later by running: asciinema upload %s\" % self.filename)\n            return 1\n\n        return 0",
      "path": "asciinema/commands/upload.py",
      "functionStartLine": 12,
      "functionName": "execute",
      "functionAnnotation": "",
      "diff": "@@ -1,19 +1,19 @@\n     def execute(self):\n         try:\n             url, warn \u003d self.api.upload_asciicast(self.filename)\n \n             if warn:\n                 self.print_warning(warn)\n \n             self.print(url)\n \n-        except FileNotFoundError as e:\n+        except OSError as e:\n             self.print_error(\"upload failed: %s\" % str(e))\n             return 1\n \n         except APIError as e:\n             self.print_error(\"upload failed: %s\" % str(e))\n             self.print_error(\"retry later by running: asciinema upload %s\" % self.filename)\n             return 1\n \n         return 0\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "4926788675caacd77fb2d7e9a8187721743553b7": {
      "type": "Ybodychange",
      "commitMessage": "Use lower-case info/error messages, like proper geeks\n",
      "commitDate": "2017/12/3 上午5:26",
      "commitName": "4926788675caacd77fb2d7e9a8187721743553b7",
      "commitAuthor": "Marcin Kulik",
      "commitDateOld": "2017/10/26 下午10:37",
      "commitNameOld": "2fbd561e2c77a860a3b8022d300b3aa80921221d",
      "commitAuthorOld": "Marcin Kulik",
      "daysBetweenCommits": 37.28,
      "commitsBetweenForRepo": 56,
      "commitsBetweenForFile": 1,
      "actualSource": "    def execute(self):\n        try:\n            url, warn \u003d self.api.upload_asciicast(self.filename)\n\n            if warn:\n                self.print_warning(warn)\n\n            self.print(url)\n\n        except FileNotFoundError as e:\n            self.print_error(\"upload failed: %s\" % str(e))\n            return 1\n\n        except APIError as e:\n            self.print_error(\"upload failed: %s\" % str(e))\n            self.print_error(\"retry later by running: asciinema upload %s\" % self.filename)\n            return 1\n\n        return 0",
      "path": "asciinema/commands/upload.py",
      "functionStartLine": 12,
      "functionName": "execute",
      "functionAnnotation": "",
      "diff": "@@ -1,19 +1,19 @@\n     def execute(self):\n         try:\n             url, warn \u003d self.api.upload_asciicast(self.filename)\n \n             if warn:\n                 self.print_warning(warn)\n \n             self.print(url)\n \n         except FileNotFoundError as e:\n-            self.print_error(\"Upload failed: %s\" % str(e))\n+            self.print_error(\"upload failed: %s\" % str(e))\n             return 1\n \n         except APIError as e:\n-            self.print_error(\"Upload failed: %s\" % str(e))\n-            self.print_error(\"Retry later by running: asciinema upload %s\" % self.filename)\n+            self.print_error(\"upload failed: %s\" % str(e))\n+            self.print_error(\"retry later by running: asciinema upload %s\" % self.filename)\n             return 1\n \n         return 0\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "2fbd561e2c77a860a3b8022d300b3aa80921221d": {
      "type": "Ybodychange",
      "commitMessage": "Improve messages\n",
      "commitDate": "2017/10/26 下午10:37",
      "commitName": "2fbd561e2c77a860a3b8022d300b3aa80921221d",
      "commitAuthor": "Marcin Kulik",
      "commitDateOld": "2016/7/2 上午12:07",
      "commitNameOld": "6d81785498b69f77e53c719bb90a049915f605f5",
      "commitAuthorOld": "Marcin Kulik",
      "daysBetweenCommits": 481.94,
      "commitsBetweenForRepo": 148,
      "commitsBetweenForFile": 1,
      "actualSource": "    def execute(self):\n        try:\n            url, warn \u003d self.api.upload_asciicast(self.filename)\n\n            if warn:\n                self.print_warning(warn)\n\n            self.print(url)\n\n        except FileNotFoundError as e:\n            self.print_error(\"Upload failed: %s\" % str(e))\n            return 1\n\n        except APIError as e:\n            self.print_error(\"Upload failed: %s\" % str(e))\n            self.print_error(\"Retry later by running: asciinema upload %s\" % self.filename)\n            return 1\n\n        return 0",
      "path": "asciinema/commands/upload.py",
      "functionStartLine": 12,
      "functionName": "execute",
      "functionAnnotation": "",
      "diff": "@@ -1,19 +1,19 @@\n     def execute(self):\n         try:\n             url, warn \u003d self.api.upload_asciicast(self.filename)\n \n             if warn:\n                 self.print_warning(warn)\n \n             self.print(url)\n \n         except FileNotFoundError as e:\n-            self.print_warning(\"Upload failed: %s\" % str(e))\n+            self.print_error(\"Upload failed: %s\" % str(e))\n             return 1\n \n         except APIError as e:\n-            self.print_warning(\"Upload failed: %s\" % str(e))\n-            self.print_warning(\"Retry later by running: asciinema upload %s\" % self.filename)\n+            self.print_error(\"Upload failed: %s\" % str(e))\n+            self.print_error(\"Retry later by running: asciinema upload %s\" % self.filename)\n             return 1\n \n         return 0\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "6d81785498b69f77e53c719bb90a049915f605f5": {
      "type": "Yintroduced",
      "commitMessage": "Add \"upload\" command\n",
      "commitDate": "2016/7/2 上午12:07",
      "commitName": "6d81785498b69f77e53c719bb90a049915f605f5",
      "commitAuthor": "Marcin Kulik",
      "diff": "@@ -0,0 +1,19 @@\n+    def execute(self):\n+        try:\n+            url, warn \u003d self.api.upload_asciicast(self.filename)\n+\n+            if warn:\n+                self.print_warning(warn)\n+\n+            self.print(url)\n+\n+        except FileNotFoundError as e:\n+            self.print_warning(\"Upload failed: %s\" % str(e))\n+            return 1\n+\n+        except APIError as e:\n+            self.print_warning(\"Upload failed: %s\" % str(e))\n+            self.print_warning(\"Retry later by running: asciinema upload %s\" % self.filename)\n+            return 1\n+\n+        return 0\n\\ No newline at end of file\n",
      "actualSource": "    def execute(self):\n        try:\n            url, warn \u003d self.api.upload_asciicast(self.filename)\n\n            if warn:\n                self.print_warning(warn)\n\n            self.print(url)\n\n        except FileNotFoundError as e:\n            self.print_warning(\"Upload failed: %s\" % str(e))\n            return 1\n\n        except APIError as e:\n            self.print_warning(\"Upload failed: %s\" % str(e))\n            self.print_warning(\"Retry later by running: asciinema upload %s\" % self.filename)\n            return 1\n\n        return 0",
      "path": "asciinema/commands/upload.py",
      "functionStartLine": 12,
      "functionName": "execute",
      "functionAnnotation": ""
    }
  }
}